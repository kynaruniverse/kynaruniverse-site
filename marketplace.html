<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Marketplace | KYNAR Universe</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
</head>
<body>

    <!-- Drawer Overlay (ADDED) -->
    <div class="drawer-overlay" aria-hidden="true"></div>

    <div class="header-wrapper">
        <header class="top-header">
            <div class="logo-area">
                <button class="menu-icon custom-burger" type="button" aria-label="Toggle navigation menu" aria-expanded="false">
                    <span></span><span></span><span></span>
                </button>
                <div class="site-title">
                    <a href="index.html" class="site-title-link">
                        <p class="main-title">Kynar</p>
                        <p class="sub-title">Universe.co.uk</p>
                    </a>
                    <figure class="stars">✶ , * ✦ , * ✶ , ✶ * , ✦ *</figure>
                </div>
            </div>
            <p class="slogan-header">"The Universe of a Sole Creator"</p>
            <div class="account-area">
                <a href="#" class="sign-in-link">
                    <div class="custom-lock-icon">
                        <img src="/images/log-in-icon.png" alt="User sign in">
                    </div>
                    <span class="sign-in-text">Sign in</span>
                </a>
            </div>
        </header>

        <nav class="main-nav">
            <ul>
                <li><a href="index.html">Home</a></li>
                <li><a href="marketplace.html" style="color: var(--color-star-red);">Marketplace</a></li>
                <li><a href="account.html" id="account-nav-link" class="account-nav-link">Account</a></li>
                <li><a href="#">Journal</a></li>
                <li><a href="#">Library</a></li>
            </ul>
        </nav>

        <div class="search-subscribe-bar">
            <form class="search-box" id="search-form">
                <input type="text" id="search-input" placeholder="Search creations...">
                <button type="submit" class="search-submit">
                    <img src="/images/search-button.svg" alt="Search" class="search-icon">
                </button>
            </form>
            <a href="#" class="subscribe-button">SUBSCRIBE</a>
        </div>
    </div>

    <main class="main-content-container">
        <!-- Featured Section - NOT filterable -->
        <section class="featured-products">
            <h2 class="section-title" style="font-family: 'Bantayog'; text-align: center; margin-bottom: 20px;">Featured Creations</h2>
            <div class="category-cards-section">
                
                <article class="category-card planning-productivity-card featured-card">
                    <div class="product-badge" style="background: var(--color-star-red); color: white; padding: 2px 8px; border-radius: 5px; font-size: 10px; align-self: flex-start;">Top Pick</div>
                    <h3>Ultimate Life Planner</h3>
                    <div class="asset-grid">
                        <a href="#" class="asset-item"><span>Notion Template</span></a>
                        <a href="#" class="asset-item"><span>Digital PDF</span></a>
                    </div>
                    <div class="product-footer" style="display: flex; justify-content: space-between; align-items: center; margin-top: 15px;">
                        <span class="price-tag" style="font-weight: bold; color: var(--color-star-red);">£15.00</span>
                        <a href="#" class="browse-button">Buy Now</a>
                    </div>
                </article>

                <article class="category-card prompts-content-card featured-card">
                    <div class="product-badge" style="background: var(--color-main-gold); color: white; padding: 2px 8px; border-radius: 5px; font-size: 10px; align-self: flex-start;">New</div>
                    <h3>ADHD Focus Guide</h3>
                    <div class="asset-grid">
                        <a href="#" class="asset-item"><span>E-Book</span></a>
                        <a href="#" class="asset-item"><span>Worksheets</span></a>
                    </div>
                    <div class="product-footer" style="display: flex; justify-content: space-between; align-items: center; margin-top: 15px;">
                        <span class="price-tag" style="font-weight: bold; color: var(--color-star-red);">£9.00</span>
                        <a href="#" class="browse-button">Buy Now</a>
                    </div>
                </article>
            </div>
        </section>

        <!-- Main Shop Section -->
        <div class="shop-layout">
            <aside class="marketplace-filters">
                <div class="filter-header" style="display: flex; justify-content: space-between; align-items: center; border-bottom: 1px solid rgba(0,0,0,0.1); padding-bottom: 10px;">
                    <h3 style="font-family: 'Bantayog'; font-size: 16px;">Filter & Sort</h3>
                    <button id="clear-filters" style="background: none; border: none; color: var(--color-star-red); cursor: pointer; font-size: 12px; font-weight: bold;">Reset</button>
                </div>

                <div class="filter-group">
                    <h4>Category</h4>
                    <label class="filter-label"><input type="checkbox" class="cat-filter" value="productivity"> Productivity</label>
                    <label class="filter-label"><input type="checkbox" class="cat-filter" value="homeschool"> Homeschool</label>
                    <label class="filter-label"><input type="checkbox" class="cat-filter" value="creative"> Creative</label>
                </div>

                <div class="filter-group">
                    <h4>Price Range</h4>
                    <label class="filter-label"><input type="radio" name="price" value="all" checked> All Prices</label>
                    <label class="filter-label"><input type="radio" name="price" value="0"> Free</label>
                    <label class="filter-label"><input type="radio" name="price" value="under10"> Under £10</label>
                    <label class="filter-label"><input type="radio" name="price" value="over10"> £10+</label>
                </div>
                
                <div class="filter-group">
                    <h4>Sort By</h4>
                    <select class="sort-dropdown" style="width: 100%; padding: 8px; border-radius: 8px; border: 1px solid var(--color-main-gold); font-family: 'Glacial Indifference';">
                        <option value="newest">Newest First</option>
                        <option value="low-high">Price: Low to High</option>
                        <option value="high-low">Price: High to Low</option>
                    </select>
                </div>
            </aside>

            <!-- ONLY List Items are Filterable -->
            <section class="scrollable-product-list" id="product-container">
                <div class="list-item" data-category="homeschool" data-price="5">
                    <div class="item-details">
                        <h4>Homeschool Math Bundle</h4>
                        <p style="font-family: 'Glacial Indifference'; font-size: 12px; color: grey;">Printable PDF • 40 Pages</p>
                    </div>
                    <div class="item-action" style="text-align: right;">
                        <span class="item-price">£5.00</span>
                        <a href="#" class="buy-link" style="display: block; font-size: 11px; text-decoration: none; color: var(--color-star-red); font-weight: bold; margin-top: 5px;">Details ➔</a>
                    </div>
                </div>

                <div class="list-item" data-category="creative" data-price="0">
                    <div class="item-details">
                        <h4>Digital Watercolor Palette</h4>
                        <p style="font-family: 'Glacial Indifference'; font-size: 12px; color: grey;">Procreate Swatches • Instant Download</p>
                    </div>
                    <div class="item-action" style="text-align: right;">
                        <span class="item-price">FREE</span>
                        <a href="#" class="buy-link" style="display: block; font-size: 11px; text-decoration: none; color: var(--color-star-red); font-weight: bold; margin-top: 5px;">Details ➔</a>
                    </div>
                </div>

                <div class="list-item" data-category="productivity" data-price="12">
                    <div class="item-details">
                        <h4>Weekly Planner Template</h4>
                        <p style="font-family: 'Glacial Indifference'; font-size: 12px; color: grey;">Notion Template • Lifetime Access</p>
                    </div>
                    <div class="item-action" style="text-align: right;">
                        <span class="item-price">£12.00</span>
                        <a href="#" class="buy-link" style="display: block; font-size: 11px; text-decoration: none; color: var(--color-star-red); font-weight: bold; margin-top: 5px;">Details ➔</a>
                    </div>
                </div>

                <div class="list-item" data-category="creative" data-price="7">
                    <div class="item-details">
                        <h4>Mindfulness Coloring Book</h4>
                        <p style="font-family: 'Glacial Indifference'; font-size: 12px; color: grey;">Digital PDF • 25 Pages</p>
                    </div>
                    <div class="item-action" style="text-align: right;">
                        <span class="item-price">£7.00</span>
                        <a href="#" class="buy-link" style="display: block; font-size: 11px; text-decoration: none; color: var(--color-star-red); font-weight: bold; margin-top: 5px;">Details ➔</a>
                    </div>
                </div>

                <div class="list-item" data-category="productivity" data-price="0">
                    <div class="item-details">
                        <h4>Daily Habit Tracker</h4>
                        <p style="font-family: 'Glacial Indifference'; font-size: 12px; color: grey;">Printable PDF • Free Download</p>
                    </div>
                    <div class="item-action" style="text-align: right;">
                        <span class="item-price">FREE</span>
                        <a href="#" class="buy-link" style="display: block; font-size: 11px; text-decoration: none; color: var(--color-star-red); font-weight: bold; margin-top: 5px;">Details ➔</a>
                    </div>
                </div>
            </section>
        </div>
    </main>

    <nav class="side-drawer" aria-hidden="true">
        <button class="drawer-close" type="button">Close ✕</button>
        <ul>
            <li><a href="index.html">Home</a></li>
            <li><a href="marketplace.html">Marketplace</a></li>
            <li><a href="#">Journal</a></li>
            <li><a href="#">Resources</a></li>
            <li><a href="account.html" class="account-nav-link">Account</a></li>
        </ul>
    </nav>

        <script type="module">
      import { initializeApp } from "https://www.gstatic.com/firebasejs/12.7.0/firebase-app.js";
      import { getAuth, onAuthStateChanged, signInWithEmailAndPassword, createUserWithEmailAndPassword, signOut } from "https://www.gstatic.com/firebasejs/12.7.0/firebase-auth.js";
      import { getFirestore, doc, setDoc } from "https://www.gstatic.com/firebasejs/12.7.0/firebase-firestore.js";
      
      const firebaseConfig = {
        apiKey: "AIzaSyDBCrZmrwbiAP4SFoIZrBYmJaYszdAj8pk",
        authDomain: "kynar-universe-official.firebaseapp.com",
        projectId: "kynar-universe-official",
        storageBucket: "kynar-universe-official.firebasestorage.app",
        messagingSenderId: "1089722386738",
        appId: "1:1089722386738:web:372e68ab876deb4707ef2b"
      };
      
      const app = initializeApp(firebaseConfig);
      const auth = getAuth(app);
      const db = getFirestore(app);
      
      // These link the global variables that auth-ui.js expects
      window._firebaseAuth = auth;
      window._firebaseOnAuthStateChanged = onAuthStateChanged;
      window._firebaseSignIn = signInWithEmailAndPassword;
      window._firebaseSignUp = async (auth, email, pass, displayName) => { /* same as index.html */ };
      window._firebaseSignOut = signOut;
      window._firebaseDb = db;
    </script>

    <script src="script.js" defer></script>
    <script src="auth-ui.js" type="module"></script>
</body>
</html>