<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Explore the KYNAR Universe Marketplace - Premium templates, systems, and creative resources.">
    <title>Marketplace | KYNAR Universe</title>
    
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <link rel="icon" type="image/png" href="assets/favicon.png">
</head>

<body class="marketplace-page">
    
    <a href="#main-marketplace-content" class="visually-hidden">Skip to content</a>
    
    <div class="drawer-overlay" id="drawer-overlay" aria-hidden="true"></div>
    <div class="loading-overlay" id="global-loading" aria-live="polite" aria-label="Loading">
        <div class="loading-spinner"></div>
    </div>

    <div class="header-wrapper">
        <div data-include="components/header.html"></div>
    </div>

    <main id="main-marketplace-content" class="main-content-container container shop-layout">
        
        <aside class="marketplace-filters" id="filter-sidebar">
            <div class="filter-header-mobile" style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                <h3>Filters</h3>
                <button class="drawer-close" id="mobile-filter-close" aria-label="Close filters">&times;</button>
            </div>

            <div class="filter-group">
                <h4>Category</h4>
                <label class="filter-label"><input type="checkbox" class="cat-filter" value="productivity"> Productivity</label>
                <label class="filter-label"><input type="checkbox" class="cat-filter" value="homeschool"> Homeschool</label>
                <label class="filter-label"><input type="checkbox" class="cat-filter" value="creative"> Creative & Art</label>
            </div>

            <div class="filter-group">
                <h4>Price</h4>
                <label class="filter-label"><input type="radio" name="price" value="all" checked> Any Price</label>
                <label class="filter-label"><input type="radio" name="price" value="under10"> Under £10</label>
                <label class="filter-label"><input type="radio" name="price" value="over10"> £10+</label>
            </div>

            <div class="filter-actions-mobile">
                <button id="apply-filters-btn" class="btn btn-primary btn-full-width">Apply Filters</button>
            </div>
            
            <button id="clear-filters" style="margin-top: 20px; background: none; border: none; text-decoration: underline; cursor: pointer; color: #888;">Clear all filters</button>
        </aside>

        <section class="product-feed">
            <div class="feed-header" style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                <span id="result-count" style="font-family: var(--font-glacial); font-weight: bold;">Showing all creations</span>
                
                <div class="sort-wrapper">
                    <button class="mobile-filter-btn" id="mobile-filter-toggle">
                        <i class="fa-solid fa-filter"></i> Filters
                    </button>
                    
                    <select class="sort-dropdown" aria-label="Sort products" style="padding: 8px; border-radius: 8px; border: 1px solid #ccc;">
                        <option value="newest">Newest First</option>
                        <option value="low-high">Price: Low to High</option>
                        <option value="high-low">Price: High to Low</option>
                    </select>
                </div>
            </div>

            <div id="product-container" class="scrollable-product-list">
                
                <article class="list-item reveal-on-scroll" data-category="productivity" data-type="template" data-price="12" data-date="2025-01-20">
                    <div class="item-visual"></div>
                    <div class="item-details">
                        <h4>Ultimate Life Planner</h4>
                        <p>Notion Template • Productivity</p>
                        <div class="tags" style="display: flex; gap: 5px;">
                            <span class="asset-item" style="font-size: 10px; padding: 2px 8px;">Notion</span>
                        </div>
                    </div>
                    <div class="item-action">
                        <div class="item-price">£12.00</div>
                        <button class="btn btn-primary btn-sm js-add-to-cart" 
                            data-id="p1" 
                            data-title="Ultimate Life Planner" 
                            data-price="12.00">
                            Add to Cart
                        </button>
                    </div>
                </article>

                <article class="list-item" data-category="homeschool" data-type="printable" data-price="5" data-date="2025-01-18">
                    <div class="item-visual" style="background: #e3f0e7;"></div>
                    <div class="item-details">
                        <h4>Preschool Math Bundle</h4>
                        <p>PDF Printable • Homeschool</p>
                         <div class="tags" style="display: flex; gap: 5px;">
                            <span class="asset-item" style="font-size: 10px; padding: 2px 8px;">PDF</span>
                        </div>
                    </div>
                    <div class="item-action">
                        <div class="item-price">£5.00</div>
                        <button class="btn btn-primary btn-sm js-add-to-cart" 
                            data-id="p2" 
                            data-title="Preschool Math Bundle" 
                            data-price="5.00">
                            Add to Cart
                        </button>
                    </div>
                </article>
                
                <article class="list-item" data-category="creative" data-type="audio" data-price="0" data-date="2025-01-15">
                    <div class="item-visual" style="background: #f7e5f0;"></div>
                    <div class="item-details">
                        <h4>Focus Binaural Beats</h4>
                        <p>Audio MP3 • Creative</p>
                        <div class="tags" style="display: flex; gap: 5px;">
                            <span class="asset-item" style="font-size: 10px; padding: 2px 8px;">MP3</span>
                        </div>
                    </div>
                    <div class="item-action">
                        <div class="item-price">Free</div>
                         <button class="btn btn-primary btn-sm js-add-to-cart" 
                            data-id="p3" 
                            data-title="Focus Binaural Beats" 
                            data-price="0.00">
                            Get Free
                        </button>
                    </div>
                </article>

            </div>
            
            <div id="empty-state" style="display: none; text-align: center; padding: 40px;">
                <p>No products match your filters.</p>
                <button onclick="document.getElementById('clear-filters').click()" class="btn btn-secondary btn-sm">Clear Filters</button>
            </div>
        </section>
    </main>

    <div data-include="components/footer.html"></div>
    <div data-include="components/auth-modals.html"></div>

    <nav class="side-drawer" id="side-drawer" aria-hidden="true">
        <div class="drawer-header">
            <span class="drawer-title">Navigation</span>
            <button class="drawer-close-btn" type="button" aria-label="Close menu">&times;</button>
        </div>
        <ul class="drawer-list">
            <li><a href="index.html">Home</a></li>
            <li><a href="marketplace.html" class="active-drawer-link">Marketplace</a></li>
            <li><a href="guides.html">Guides</a></li>
            <li><a href="community.html">Community</a></li>
            <li class="drawer-divider">
                <a href="account.html" class="account-nav-link" id="account-nav-mobile">
                    <i class="fa-regular fa-circle-user"></i> My Account
                </a>
            </li>
        </ul>
    </nav>

    <script src="utilities.js"></script>
    <script src="loading-state.js"></script>
    <script src="script.js" defer></script>
    <script src="cart.js" defer></script>
    <script src="auth-ui.js" type="module"></script>
</body>
</html>
