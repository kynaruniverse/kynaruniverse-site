/* SOFT ROYAL ENGINE V6.0 - GLOBAL STYLES
   Role: Layout, Typography, Drawers, and Theme Variables
*/

/* --- 1. THEME VARIABLES --- */
:root {
    /* Color Palette */
    --bg-paper: #F8F8F6;      /* Off-white background */
    --bg-canvas: #E6E6E2;     /* Darker stone background */
    --ink-display: #092C23;   /* Deep Emerald (Headings) */
    --ink-body: #333333;      /* Standard Text */
    --ink-muted: #666666;     /* Secondary Text */
    --ink-border: rgba(0,0,0,0.08);
    
    --accent-gold: #C5A059;   /* Royal Gold */
    --accent-red: #D32F2F;    /* Alert/Action */
    
    /* Gradients */
    --grad-emerald: linear-gradient(135deg, #092C23 0%, #16423C 100%);
    --grad-gold: linear-gradient(135deg, #C5A059 0%, #D4AF37 100%);
    --grad-silver: linear-gradient(180deg, #FFFFFF 0%, #F4F4F4 100%);
    --grad-burgundy: linear-gradient(135deg, #4A0E0E 0%, #6B1A1A 100%);
    
    /* Shadows & Radius */
    --shadow-soft: 0 4px 12px rgba(0,0,0,0.05);
    --shadow-float: 0 15px 35px rgba(9, 44, 35, 0.1);
    --radius-card: 16px;
    --radius-pill: 99px;
    
    /* Fonts */
    --font-display: 'Bantayog', 'Times New Roman', serif;
    --font-body: 'Glacial Indifference', sans-serif;
}

/* --- 2. RESET & BASE --- */
* { box-sizing: border-box; margin: 0; padding: 0; -webkit-tap-highlight-color: transparent; }

body {
    background-color: var(--bg-paper);
    color: var(--ink-body);
    font-family: var(--font-body);
    font-size: 16px;
    line-height: 1.6;
    overflow-x: hidden; /* Prevent horizontal scroll */
}

a { text-decoration: none; color: inherit; transition: opacity 0.2s; }
button { font-family: inherit; }

/* Typography */
.text-display { font-family: var(--font-display); color: var(--ink-display); line-height: 1.2; font-weight: normal; margin-bottom: 0.5rem; }
.text-sub { font-size: 1.1rem; color: var(--ink-muted); line-height: 1.5; max-width: 600px; margin: 0 auto; }

h1 { font-size: clamp(2.5rem, 5vw, 4rem); }
h2 { font-size: 2rem; }
h3 { font-size: 1.5rem; }

/* --- 3. LAYOUT CONTAINERS --- */
.app-container {
    width: 100%;
    max-width: 1000px;
    margin: 0 auto;
    padding: 100px 1.5rem 4rem 1.5rem; /* Top padding clears fixed header */
    min-height: 100vh;
    display: flex;
    flex-direction: column;
}

/* Sections */
section { margin-bottom: 3rem; }

/* --- 4. HEADER (Fixed) --- */
.app-header {
    position: fixed;
    top: 0; left: 0; width: 100%;
    height: 70px;
    background: rgba(248, 248, 246, 0.9); /* Translucent */
    backdrop-filter: blur(10px); -webkit-backdrop-filter: blur(10px);
    z-index: 1000;
    display: flex; align-items: center; justify-content: space-between;
    padding: 0 1.5rem;
    border-bottom: 1px solid rgba(0,0,0,0.05);
}

.brand-logo { font-family: var(--font-display); font-size: 1.5rem; letter-spacing: 0.1em; color: var(--ink-display); font-weight: bold; }

.header-actions { display: flex; align-items: center; gap: 1rem; }

/* --- 5. DRAWERS (The Fix for the "Stacking" Issue) --- */
.drawer {
    position: fixed;
    top: 0;
    right: -100%; /* Hidden by default */
    width: 85%;
    max-width: 400px;
    height: 100vh;
    background: var(--bg-paper);
    z-index: 2000;
    transition: right 0.4s cubic-bezier(0.23, 1, 0.32, 1);
    box-shadow: -5px 0 30px rgba(0,0,0,0.15);
    display: flex; flex-direction: column;
    overflow-y: auto;
    visibility: hidden; /* Ensure it doesn't block clicks when closed */
}

/* Active State */
.drawer.is-open {
    right: 0;
    visibility: visible;
}

.drawer-header {
    padding: 1.5rem;
    display: flex; justify-content: space-between; align-items: center;
    border-bottom: 1px solid var(--ink-border);
}

.drawer-content { padding: 1.5rem; flex: 1; }

.drawer-backdrop {
    position: fixed; inset: 0;
    background: rgba(9, 44, 35, 0.4);
    backdrop-filter: blur(4px);
    z-index: 1999;
    opacity: 0; pointer-events: none;
    transition: opacity 0.3s ease;
}
.drawer-backdrop.is-visible { opacity: 1; pointer-events: all; }

/* --- 6. COMPONENTS: CARDS & BUTTONS --- */

/* Feature Card (The "Identity" Card) */
.feature-card {
    background: white;
    border-radius: var(--radius-card);
    padding: 2rem;
    border: 1px solid var(--ink-border);
    box-shadow: var(--shadow-soft);
    display: flex;
    flex-direction: column; /* Stack vertically on mobile */
    align-items: center;    /* Center content */
    text-align: center;
    transition: transform 0.2s ease, box-shadow 0.2s ease;
    overflow: hidden;
}

/* On Desktop, switch to row if needed, but for Identity card, column is usually best */
@media (min-width: 768px) {
    .feature-card.horizontal {
        flex-direction: row;
        text-align: left;
        align-items: flex-start;
    }
}

/* Dock Button (Pill Shape) */
.dock-btn {
    display: inline-flex; align-items: center; justify-content: center;
    height: 48px;
    padding: 0 2rem;
    border-radius: var(--radius-pill);
    font-size: 0.9rem;
    font-weight: 600;
    letter-spacing: 0.05em;
    text-transform: uppercase;
    background: var(--ink-display);
    color: white;
    border: none;
    cursor: pointer;
    transition: transform 0.1s, opacity 0.2s;
    white-space: nowrap;
}
.dock-btn:active { transform: scale(0.98); }

/* Stream Card (Horizontal Scroll Items or List Items) */
.stream-card {
    background: white;
    border-radius: 12px;
    padding: 1rem;
    display: flex;
    flex-direction: column;
    box-shadow: var(--shadow-soft);
    border: 1px solid var(--ink-border);
    transition: transform 0.2s;
    text-decoration: none;
    color: inherit;
}
.stream-card:hover { transform: translateY(-2px); }

/* Scroll Stream (Horizontal Container) */
.scroll-stream {
    display: flex;
    gap: 1rem;
    overflow-x: auto;
    padding-bottom: 1rem;
    scrollbar-width: none; /* Hide scrollbar Firefox */
    -webkit-overflow-scrolling: touch;
}
.scroll-stream::-webkit-scrollbar { display: none; }

/* Emerald Card Variation */
.card-bg-emerald {
    background: var(--grad-emerald);
    color: white;
    border: none;
}
.card-bg-emerald .text-sub { color: rgba(255,255,255,0.7); }

/* --- 7. UTILITIES --- */
.spinner {
    display: inline-block;
    border: 2px solid rgba(0,0,0,0.1);
    border-left-color: currentColor;
    border-radius: 50%;
    width: 20px; height: 20px;
    animation: spin 1s linear infinite;
}
@keyframes spin { 100% { transform: rotate(360deg); } }

/* Fix for the "Identity Text Squashing" */
/* Forces the identity card text to have full width so it doesn't wrap weirdly */
#state-guest h3, #state-guest p {
    width: 100%;
    max-width: 400px; /* Readability cap */
}

/* --- 8. RESPONSIVE GRID --- */
/* For Archive Page */
@media (min-width: 600px) {
    #artifact-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
        gap: 1.5rem;
    }
}
