/*
   KYNAR 2026 - THE ELASTIC STACK (Platinum Plus)
   Style: Tactile Luxury / Editorial / Physics-Based
   Architect: KynarForge Pro
*/

/* =========================================
   1. CORE FOUNDATION
   ========================================= */

@font-face {
    font-family: 'Bantayog';
    src: url('fonts/Bantayog.woff2') format('woff2');
    font-weight: 400 900; font-style: normal; font-display: swap;
}

@font-face {
    font-family: 'Glacial Indifference';
    src: url('fonts/GlacialIndifferenceRegular.woff2') format('woff2');
    font-weight: normal; font-style: normal; font-display: swap;
}

:root {
    /* Platinum Palette (Paper & Ink) */
    --bg-body: #ffffff;
    --bg-surface: #f2f2f2;
    --bg-card: #ffffff;
    
    /* Typography */
    --text-main: #0a0a0a;
    --text-muted: #666666;
    
    /* Accents */
    --gold-neon: #D4AF37;
    --gold-faint: rgba(212, 175, 55, 0.1);
    
    /* Elastic Metrics */
    --overlap-offset: 60px; /* How much of the card 'peeks' out */
    --card-radius: 24px;
    --shadow-stack: 0 -10px 30px rgba(0,0,0,0.05);
    --shadow-active: 0 20px 50px rgba(0,0,0,0.1);
    
    /* Layering */
    --z-header: 1000;
    --z-stack-base: 10;
    --z-overlay: 2000;
}

*, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

body {
    background-color: var(--bg-body);
    /* Premium Paper Texture */
    background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.65' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)' opacity='0.04'/%3E%3C/svg%3E");
    color: var(--text-main);
    font-family: 'Glacial Indifference', sans-serif;
    line-height: 1.6;
    overflow-x: hidden;
}

/* =========================================
   2. THE ELASTIC STACK ENGINE
   ========================================= */

/* The Container that holds the 'Deck' */
.product-stack-container {
    display: flex;
    flex-direction: column;
    padding: 20px;
    margin-top: 40px;
    perspective: 1000px;
}

/* Individual Card Styling */
.stack-card {
    position: sticky;
    top: 100px; /* Sticks to header area */
    background: var(--bg-card);
    border: 1px solid rgba(0,0,0,0.05);
    border-radius: var(--card-radius);
    padding: 30px;
    margin-bottom: -75vh; /* This creates the 80% overlap */
    height: 85vh;
    box-shadow: var(--shadow-stack);
    transition: transform 0.6s cubic-bezier(0.2, 1, 0.3, 1), box-shadow 0.4s ease;
    display: flex;
    flex-direction: column;
}

/* The 'Peek' Header */
.stack-card-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    height: var(--overlap-offset);
    cursor: pointer;
}

.stack-card-header h3 {
    font-family: 'Bantayog', sans-serif;
    text-transform: uppercase;
    letter-spacing: 1px;
    font-size: 1.2rem;
}

/* Expanded State (Via JS) */
.stack-card.is-expanded {
    transform: translateY(-20px) scale(1.02);
    box-shadow: var(--shadow-active);
    z-index: 500 !important;
    margin-bottom: 20px; /* Breaks the overlap to show full content */
}

/* =========================================
   3. UI COMPONENTS (TACTILE)
   ========================================= */

.btn {
    display: inline-flex; align-items: center; justify-content: center;
    padding: 14px 32px; border-radius: 99px;
    font-family: 'Bantayog', sans-serif; text-transform: uppercase;
    font-size: 11px; font-weight: bold; letter-spacing: 2px;
    transition: 0.2s cubic-bezier(0.4, 0, 0.2, 1);
    border: none; cursor: pointer;
}

.btn:active { transform: scale(0.95); } /* Haptic feedback */

.btn-primary {
    background: var(--text-main); color: #fff;
}

.btn-primary:hover {
    background: var(--gold-neon);
    box-shadow: 0 10px 20px var(--gold-faint);
}

/* =========================================
   4. THE COMMAND CONSOLE (HEADER)
   ========================================= */

.header-wrapper {
    position: sticky; top: 0; z-index: var(--z-header);
    background: rgba(255,255,255,0.8);
    backdrop-filter: blur(20px);
    border-bottom: 1px solid rgba(0,0,0,0.05);
}

.header-top-row {
    display: flex; justify-content: space-between; align-items: center;
    padding: 15px 25px;
    max-width: 1400px; margin: 0 auto;
}

.brand-text {
    font-family: 'Bantayog', sans-serif;
    font-size: 28px; letter-spacing: 2px;
}

.header-nav-row {
    border-top: 1px solid rgba(0,0,0,0.05);
    padding: 12px 0;
    display: flex; justify-content: center; gap: 40px;
}

.header-nav-row a {
    font-size: 12px; font-weight: bold; text-transform: uppercase;
    color: var(--text-muted); text-decoration: none;
    letter-spacing: 1px;
}

.header-nav-row a:hover { color: var(--text-main); }

/* =========================================
   5. UTILITIES & MODALS
   ========================================= */

.auth-modal, .side-drawer, #cart-side-drawer {
    display: none !important; /* Force hide by default */
    position: fixed; inset: 0; z-index: var(--z-overlay);
}

.auth-modal.is-open {
    display: flex !important;
    align-items: center; justify-content: center;
    background: rgba(255,255,255,0.9);
    backdrop-filter: blur(10px);
}

.bg-dark { background: #0a0a0a; color: #fff; }

@keyframes springUp {
    0% { transform: translateY(100%); }
    100% { transform: translateY(0); }
}
